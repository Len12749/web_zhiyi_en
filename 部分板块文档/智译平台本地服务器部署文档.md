# 智译平台本地服务器部署文档

## 一、需要手动安装的工具和环境

- git
- anaconda
- cursor
- vpn/clash
- Microsoft C++生成工具：C++的桌面开发
- Node.js
- Docker Desktop



## 二、依赖仓库

api负载均衡docker部署即可，此处匆匆带过



## 三、主要流程

- 拉取仓库
- 创建两个虚拟环境（pdf翻译的条件比较苛刻，加之我之前创错了）
- 安装前端依赖：
  - cd web
  - npm install

- 安装、部署数据库：
  - cd web
  - npx supabase start
  - npm run db:push (选择yes)
- 配置后端环境



## 四、后端环境（或许有遗漏，但不多）

```cmd
3.13.5
# 除了pdf翻译.
# 我创虚拟环境的时候建错了，实际上3.8应该也可以.
# 有些步骤需要开梯子，有的则需要关梯子，有的最好挂镜像源，多试一下.
pip install uvicorn
pip install fastapi uvicorn
pip install python-multipart
pip install pymupdf
pip install langdetect
pip3 install torch torchvision torchaudio
python -m pip install --pre paddlepaddle -i https://www.paddlepaddle.org.cn/packages/nightly/cpu/
pip install paddlex -i https://mirror.baidu.com/pypi/simple
pip install transformers
```

```cmd
python 3.8
# pdf翻译.
pip3 install torch torchvision torchaudio
pip install torch torchvision torchaudio --extra-index-url https://download.pytorch.org/whl/cpu
pip install PyPDF2
pip install uvicorn
pip install pyyaml
pip install fastapi
pip install matplotlib
pip install tqdm
pip install opencv-python
pip install shapely
pip install pyclipper
pip install scikit-image
pip install 'git+https://github.com/facebookresearch/detectron2.git'
pip install timm
```



## 五、部署

1. 后台部署数据库、api负载均衡
2. 部署前端：cd web; npm run build（代码不改动不需要重新构建）；npm start
3. 部署后端：打开scripts文件夹里面scripts\services\service-manager.bat直接运行即可

> [!WARNING]
>
> 注意！我的一键启动脚本里面规定了特殊的虚拟环境名称，要根据实际名称进行修改.

